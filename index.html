<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <title>Rock Paper Scissor</title>
  <style>
    * {
      margin: 0;
      padding: 0;
    }
  </style>
</head>
<body>
<div
        style="display: grid; width: 100%; height: 100vh; place-content: center"
>
  <h1 id="final"></h1>
  <script>
    const valid_moves = ['r', 'p', 's', 'rock', 'paper', 'scissor']
    let player_won_cnt = 0
    for (let i = 0; i < 5; i++) {
      let player = ''
      while (true) {
        player = prompt(`石头剪刀布 ${i + 1}/5`).toLowerCase()
        if (valid_moves.indexOf(player) === -1) {
          alert('valid input: r,p,s,rock,paper,scissor')
        } else {
          break
        }
      }
      const computer = ['r', 'p', 's'][Math.floor(Math.random() * 3)]
      alert(`yours: ${player} \ncomputer's: ${computer}`)
      switch (`${player},${computer}`) {
        case 'scissor,s':
        case 's,s':
        case 'paper,p':
        case 'p,p':
        case 'rock,r':
        case 'r,r': {
          alert('tie')
          break
        }
        case 'scissor,p':
        case 's,p':
        case 'paper,r':
        case 'p,r':
        case 'rock,s':
        case 'r,s': {
          alert('you win')
          ++player_won_cnt
          break
        }
        case 'rock,p':
        case 'r,p':
        case 'scissor,r':
        case 's,r':
        case 'paper,s':
        case 'p,s': {
          alert('you lose')
          break
        }
      }
    }
    document
            .querySelector('#final')
            .insertAdjacentText(
                    'afterbegin',
                    `You've won ${player_won_cnt} ${
                            player_won_cnt > 1 ? 'matches' : 'match'
                    }`
            )
  </script>
</div>
</body>
</html>
